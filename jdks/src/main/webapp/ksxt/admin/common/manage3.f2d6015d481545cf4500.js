webpackJsonp([22],{0:function(t,e,i){t.exports=i(430)},281:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var a=i(7);var d=r(a);var n=i(8);var o=r(n);var s=i(967);var l=r(s);function r(t){return t&&t.__esModule?t:{"default":t}}e.default={data:function u(){return{currentMenu:"manage",currentSubmenu:"manage3"}},components:{Navbar:d.default,Topmenu:o.default,Mainarea:l.default}}},282:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var a=i(971);var d=n(a);function n(t){return t&&t.__esModule?t:{"default":t}}e.default={data:function o(){return{currentView:"PxDefault"}},components:{PxDefault:d.default},ready:function s(){}}},283:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var a=i(1);var d=s(a);var n=i(2);var o=s(n);function s(t){return t&&t.__esModule?t:{"default":t}}e.default={data:function l(){var t={title:{m:1,type:"",show:false},ggfw:{m:1,type:"select",show:false},mod:{m:1,type:"select",show:false,ready:function(t,e){this.validateConfig[t].m=0;e(null,"")}.bind(this)},msg:{m:0,type:"",show:false},sortnum:{m:1,type:"",show:false,disable:0,chk:function(t,e){if(!/^\d{1,5}$/.test(this.entity[t])){this.showError(t,"优先级只能输入数字")}e()}.bind(this)},fileid:{m:0,type:"",show:false}};var e={};for(var i in t){e[i]=""}return{entity:e,validateConfig:t,selector:"#modal_add"}},events:{doAdd:"doAdd",showHide:"showHide"},computed:{iscity:function r(){return window.__global.user.roletype==="1"||window.__global.user.roletype==="0"}},methods:{showHide:function u(t){(0,d.default)("#d_hint").remove();if(t===1){(0,d.default)("#d_editor").show()}else{(0,d.default)("#d_editor").hide()}},doAdd:function c(t){var e=document.getElementById("d_frm");var i=e.contentWindow?e.contentWindow:e.contentDocument.defaultView;var a=i.UM.getEditor("myEditor").hasContents();this.validateAll(function(){if(!a){window.Alert("请填写内容");return}var e={};for(var d in this.entity){e[d]=this.entity[d]}e["sortnum"]=parseInt(e["sortnum"],10);e.msg=i.UM.getEditor("myEditor").getContent();window.winLog("entity.msg.length: "+e.msg.length);var n="";if(window.__global.user.roletype==="1"){n="/yeyzsxjxh/notice/addNoticeForCity"}else if(window.__global.user.roletype==="2"){e.districtcode=window.__global.user.districtcode;n="/yeyzsxjxh/notice/addNoticeForDistrict"}e.userid=window.__global.user.id;window.post({url:n,data:window.myEncode(e)},function(e){e=window.myDecode(e);if(e.status==="success"){t.close();window.app.$broadcast("reloadList");window.Alert("操作成功")}else{window.Alert(e.message)}})}.bind(this))},initUpload:function f(){try{window["km_upload"].uList["attachment"].destroy()}catch(t){}window.__global.checkquit="";var e='\n        <div class="d-upload">\n          <div class="up">\n            <div id="d_upload_attachment" name="attachment"></div>\n          </div>\n          <div class="uploadholder uploadholder-attachment ua-normal">\n            <div class="icon"></div>\n            <div class="pro"></div>\n          </div>\n          <div>文件大小不超过 20M，文件类型为 zip,rar,7z,tag</div>\n        </div>\n      ';(0,d.default)("#d_file").html(e);window["funcUploadFile"]("attachment",".uploadholder-attachment","/yeyzsxjxh/file/uploadNoticeFile","*.zip;*.rar;*.7z;*.tag",1024*20,1,function(t){if(typeof t==="string"){t=JSON.parse(t)}t=window.myDecode(t);if(t["data"]){this.entity.fileid=t.data.fileid;this.entity.virpath=t.data.virpath;(0,d.default)("#d_virpath .t").html('<a id="link_file" href="'+this.entity.virpath+'" target="_blank"><span class="glyphicon glyphicon-download-alt"></span>&nbsp;下载</a>')}var e="";e+=t.message;if(t.status==="success"){if(t.data["url1"]){e+='<br><br><a href="'+t.data["url1"]+'" target="_blank">操作成功的数据</a>'}if(t.data["url2"]){e+='<br><br><a href="'+t.data["url2"]+'" target="_blank">操作失败的数据</a>'}if(t.data["url"]){e+='<br><br><a href="'+t.data["url"]+'" target="_blank">操作结果</a>'}}(0,d.default)("#d_result").html(e);setTimeout(function(){this.initUpload()}.bind(this),1e3)}.bind(this),{suix:"zip",type:6})}},ready:function p(){this.beforeInit();window["loadUpload"](function(){this.initUpload()}.bind(this));this.afterInit();this.validateInit()},components:{Vf:o.default}}},284:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var a=i(1);var d=s(a);var n=i(2);var o=s(n);function s(t){return t&&t.__esModule?t:{"default":t}}e.default={data:function l(){var t={id:{m:0,type:"",show:false},title:{m:1,type:"",show:false},ggfw:{m:1,type:"select",show:false},mod:{m:0,type:"select",show:false},msg:{m:0,type:"",show:false},sortnum:{m:1,type:"",show:false,disable:0,chk:function(t,e){if(!/^\d{1,5}$/.test(this.entity[t])){this.showError(t,"优先级只能输入数字")}e()}.bind(this)},fileid:{m:0,type:"",show:false},virpath:{m:0,type:"",show:false}};var e={};for(var i in t){e[i]=""}return{entity:e,validateConfig:t,selector:"#modal_add"}},props:["id"],events:{doEdit:"doEdit",showHide:"showHide"},methods:{delFile:function r(){this.entity.fileid="";this.entity.virpath="";window["loadUpload"](function(){this.initUpload()}.bind(this))},setContent:function u(){var t=document.getElementById("d_frm");var e=t.contentWindow?t.contentWindow:t.contentDocument.defaultView;if((0,d.default)("#d_editor").css("display")!=="none"){window.winLog(e);e.setContent(this.entity.msg)}else{setTimeout(function(){this.setContent()}.bind(this),100)}},showHide:function c(t){(0,d.default)("#d_hint").remove();if(t===1){(0,d.default)("#d_editor").show()}else{(0,d.default)("#d_editor").hide()}},doEdit:function f(t){var e=document.getElementById("d_frm");var i=e.contentWindow?e.contentWindow:e.contentDocument.defaultView;var a=i.UM.getEditor("myEditor").hasContents();this.validateAll(function(){if(!a){window.Alert("请填写内容");return}var e={};for(var d in this.entity){e[d]=this.entity[d]}e["sortnum"]=parseInt(e["sortnum"],10);e.msg=i.UM.getEditor("myEditor").getContent();window.post({url:"/yeyzsxjxh/notice/modifyNotice",data:window.myEncode(e)},function(e){e=window.myDecode(e);if(e.status==="success"){t.close();window.app.$broadcast("reloadList");window.Alert("操作成功")}else{window.Alert(e.message)}})}.bind(this))},initUpload:function p(){try{window["km_upload"].uList["attachment"].destroy()}catch(t){}window.__global.checkquit="";var e='\n        <div class="d-upload">\n          <div class="up">\n            <div id="d_upload_attachment" name="attachment"></div>\n          </div>\n          <div class="uploadholder uploadholder-attachment ua-normal">\n            <div class="icon"></div>\n            <div class="pro"></div>\n          </div>\n          <div>文件大小不超过 20M，文件类型为 zip,rar,7z,tag</div>\n        </div>\n      ';(0,d.default)("#d_file").html(e);window["funcUploadFile"]("attachment",".uploadholder-attachment","/yeyzsxjxh/file/uploadNoticeFile","*.zip;*.rar;*.7z;*.tag",1024*20,1,function(t){if(typeof t==="string"){t=JSON.parse(t)}t=window.myDecode(t);if(t["data"]){this.entity.fileid=t.data.fileid;this.entity.virpath=t.data.virpath}var e="";e+=t.message;if(t.status==="success"){if(t.data["url1"]){e+='<br><br><a href="'+t.data["url1"]+'" target="_blank">操作成功的数据</a>'}if(t.data["url2"]){e+='<br><br><a href="'+t.data["url2"]+'" target="_blank">操作失败的数据</a>'}if(t.data["url"]){e+='<br><br><a href="'+t.data["url"]+'" target="_blank">操作结果</a>'}}(0,d.default)("#d_result").html(e);setTimeout(function(){this.initUpload()}.bind(this),1e3)}.bind(this),{suix:"zip",type:6})}},ready:function v(){this.beforeInit();window.winLog(this.id);window.post({url:"/yeyzsxjxh/notice/getNotice",data:window.myEncode({id:this.id})},function(t){t=window.myDecode(t);this.dataPreHandle(t);if(t.data.fileid===""){window["loadUpload"](function(){this.initUpload()}.bind(this))}this.$nextTick(function(){this.afterInit();this.validateInit()}.bind(this));this.setContent()}.bind(this))},components:{Vf:o.default}}},285:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var a=i(3);var d=r(a);var n=i(1);var o=r(n);var s=i(2);var l=r(s);function r(t){return t&&t.__esModule?t:{"default":t}}e.default={data:function u(){return{entity:{}}},props:["id"],methods:{},ready:function c(){this.beforeInit();var t=true;var e=false;var i=undefined;try{for(var a=(0,d.default)(window["dataTable"]["table"].bootstrapTable("getData")),n;!(t=(n=a.next()).done);t=true){var s=n.value;if(s.id!==this.id){continue}this.entity=s;this.entity.virpath=this.entity.virpath||"";break}}catch(l){e=true;i=l}finally{try{if(!t&&a.return){a.return()}}finally{if(e){throw i}}}this.$nextTick(function(){(0,o.default)("#d_editor").html(this.entity.msg);this.afterInit()}.bind(this))},components:{Vf:l.default}}},286:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var a=i(1);var d=y(a);var n=i(10);var o=y(n);var s=i(11);var l=y(s);var r=i(4);var u=y(r);var c=i(968);var f=y(c);var p=i(970);var v=y(p);var h=i(969);var m=y(h);var w=i(12);var b=y(w);function y(t){return t&&t.__esModule?t:{"default":t}}e.default={data:function _(){var t=window.__global.user.roletype;var e=(0,o.default)(["0","1","2","3","4"],"manage3_table",t,this);if(!e){return{}}e.postData.userid=window.__global.user.id;return e},events:{add:"add",edit:"edit",del:"del",view:"view",recover:"recover",reloadList:"reloadList"},methods:{add:function g(){var t=u.default.extend({template:"<mx-add></mx-add>",components:{MxAdd:f.default}});this.dialogModal({did:"modal_add",title:"添加",cssClass:"big-dialog-umeditor",buttons:[{label:"提交",cssClass:"btn-primary",action:function e(t){window.app.$broadcast("doAdd",t)}},{label:"关闭",action:function i(t){t.close()}}]},t)},edit:function x(t){var e=u.default.extend({data:function i(){return{id:t}},template:'<mx-edit :id="id"></mx-edit>',components:{MxEdit:m.default}});this.dialogModal({did:"modal_add",title:"编辑",cssClass:"big-dialog-umeditor",buttons:[{label:"提交",cssClass:"btn-primary",action:function a(t){window.app.$broadcast("doEdit",t)}},{label:"关闭",action:function d(t){t.close()}}]},e)},view:function M(t){var e=u.default.extend({data:function a(){return{id:t}},template:'<mx-view :id="id"></mx-view>',components:{MxView:v.default}});var i=[];i.push({label:"关闭",action:function d(t){t.close()}});this.dialogModal({did:"modal_view",title:"查看",cssClass:"big-dialog-umeditor",buttons:i},e)},del:function z(t){this.dialogConfirm({title:"撤销",message:"<div>您确定要撤销吗？</div>"},["取消","确定"],{url:"/yeyzsxjxh/notice/cancelNotice",data:window.myEncode({id:t})},function(t){t=window.myDecode(t);window.Alert("操作成功");this.dataHandle()}.bind(this),function(t,e){e.close();window.Alert(t.message)})},recover:function k(t){this.dialogConfirm({title:"恢复",message:"<div>您确定要恢复吗？</div>"},["取消","确定"],{url:"/yeyzsxjxh/notice/recoverNotice",data:window.myEncode({id:t})},function(t){t=window.myDecode(t);window.Alert("操作成功");this.dataHandle()}.bind(this),function(t,e){e.close();window.Alert(t.message)})}},ready:function E(){if(window.__global.user.roletype==="3"||window.__global.user.roletype==="4"){(0,d.default)(".mainarea").html("");window.Alert("学校管理员没有访问权限");return}this.pageNav();this.dataTableInit()},components:{Searchbar:l.default,Va:b.default}}},430:function(t,e,i){"use strict";var a=i(4);var d=l(a);var n=i(966);var o=l(n);var s=i(5);function l(t){return t&&t.__esModule?t:{"default":t}}window.__pageInit=function(){s.km.init(function(){window.app=new d.default({el:"body",components:{App:o.default}})})}},571:function(t,e){},572:function(t,e){},573:function(t,e){},574:function(t,e){},575:function(t,e){},576:function(t,e){},766:function(t,e){t.exports=" <div id=app class=appv> <navbar></navbar> <topmenu :current-menu=currentMenu :current-submenu=currentSubmenu :current-parentmenu=currentParentmenu></topmenu> <mainarea v-ref:mainarea></mainarea> </div> "},767:function(t,e){t.exports=" <div class=mainarea> <component :is=currentView></component> </div> "},768:function(t,e){t.exports=' <div class=d-tbl> <vf field=title label=标题 maxlength=100></vf> <template v-if=iscity> <vf field=mod label=类型 data-dict=t_bz_gglx></vf> </template> <vf field=ggfw label=公告范围 data-dict=t_bz_ggfw></vf> <vf field=sortnum label=优先级 maxlength=5 :style="{display: \'inline-block\',width: \'70px\', marginRight: \'5px\'}"><span>数字越大优先级越高</span></vf> <div id=d_hint>正在加载编辑器...</div> <div id=d_editor style="padding-top: 10px;display:none"> <iframe id=d_frm src=../resource/umeditor1_2_2/index.html class=ifrm frameborder=0></iframe> </div> </div> <div class=i v-bind:class="fieldClass(\'fileid\')"> <div style="padding:10px 0 0 0">上传文件</div> <span class=t id=d_file> <div class=d-upload> <div class=up> <div id=d_upload_attachment name=attachment></div> </div> <div class="uploadholder uploadholder-attachment ua-normal"> <div class=icon></div> <div class=pro></div> </div> <div>文件大小不超过 20M，文件类型为 zip,rar,7z,tag</div> </div> </span> </div> <div class=i id=d_virpath v-show="entity.fileid != \'\'"> <div style="padding:10px 0 0 0">已上传的文件</div> <span class=t></span> </div> '},769:function(t,e){t.exports=' <div class=d-tbl> <vf field=title label=标题 maxlength=100></vf> <template v-if=iscity> <vf field=mod label=类型 data-dict=t_bz_gglx></vf> </template> <vf field=ggfw label=公告范围 data-dict=t_bz_ggfw></vf> <vf field=sortnum label=优先级 maxlength=5 :style="{display: \'inline-block\',width: \'70px\', marginRight: \'5px\'}"><span>数字越大优先级越高</span></vf> <div id=d_hint>正在加载编辑器...</div> <div id=d_editor style="padding-top: 10px;display:none"> <iframe id=d_frm src=../resource/umeditor1_2_2/index.html class=ifrm frameborder=0></iframe> </div> </div> <div class=i v-bind:class="fieldClass(\'fileid\')" v-show="entity.fileid === \'\'"> <div style="padding:10px 0 0 0">上传文件</div> <span class=t id=d_file> <div class=d-upload> <div class=up> <div id=d_upload_attachment name=attachment></div> </div> <div class="uploadholder uploadholder-attachment ua-normal"> <div class=icon></div> <div class=pro></div> </div> <div>文件大小不超过 20M，文件类型为 zip,rar,7z,tag</div> </div> </span> </div> <div class=i id=d_virpath v-show="entity.fileid !== \'\'"> <div style="padding:10px 0 0 0">已上传的文件</div> <a id=link_file href={{entity.virpath}} target=_blank><span class="glyphicon glyphicon-download-alt"></span>&nbsp;下载附件</a> <button class="btn btn-default btn-sm" @click=delFile>删除</button> </div> '},770:function(t,e){t.exports=' <div class=d-tbl> <vf mode=view field=title label=标题></vf> <vf mode=view field=lasttime label=发布时间 data-dict=date></vf> <vf mode=view field=mod label=类型 data-dict=t_bz_gglx></vf> <vf mode=view field=sortnum label=优先级></vf> <div id=d_editor style="margin-top:10px;padding:10px;border:1px solid #ddd"> </div> </div> <div class=i id=d_virpath v-show="entity.virpath != \'\'"> <span class=t> <a id=link_file href={{entity.virpath}} target=_blank><span class="glyphicon glyphicon-download-alt"></span>&nbsp;下载附件</a> </span> </div> '},771:function(t,e){t.exports=' <div class="pagetitle clearfix"> <div class=t></div> <div class=a></div> </div> <div class=pagebody> <div class=row> <div class=col-sm-12> <searchbar v-ref:searchbar :searchbar=searchbarId :searchbar-col=searchbarCol :searchbar-fields=searchbarFields></searchbar> </div> </div> <div class=row> <div class=col-sm-12> <div id=toolbar class=btn-toolbar> <va></va> </div> <table id=table class=tbl></table> </div> </div> </div> '},966:function(t,e,i){var a,d;i(571);a=i(281);d=i(766);t.exports=a||{};if(t.exports.__esModule)t.exports=t.exports.default;if(d){(typeof t.exports==="function"?t.exports.options||(t.exports.options={}):t.exports).template=d}},967:function(t,e,i){var a,d;i(572);a=i(282);d=i(767);t.exports=a||{};if(t.exports.__esModule)t.exports=t.exports.default;if(d){(typeof t.exports==="function"?t.exports.options||(t.exports.options={}):t.exports).template=d}},968:function(t,e,i){var a,d;i(573);a=i(283);d=i(768);t.exports=a||{};if(t.exports.__esModule)t.exports=t.exports.default;if(d){(typeof t.exports==="function"?t.exports.options||(t.exports.options={}):t.exports).template=d}},969:function(t,e,i){var a,d;i(574);a=i(284);d=i(769);t.exports=a||{};if(t.exports.__esModule)t.exports=t.exports.default;if(d){(typeof t.exports==="function"?t.exports.options||(t.exports.options={}):t.exports).template=d}},970:function(t,e,i){var a,d;i(575);a=i(285);d=i(770);t.exports=a||{};if(t.exports.__esModule)t.exports=t.exports.default;if(d){(typeof t.exports==="function"?t.exports.options||(t.exports.options={}):t.exports).template=d}},971:function(t,e,i){var a,d;i(576);a=i(286);d=i(771);t.exports=a||{};if(t.exports.__esModule)t.exports=t.exports.default;if(d){(typeof t.exports==="function"?t.exports.options||(t.exports.options={}):t.exports).template=d}}});